<div class="flex justify-center items-center min-h-screen">
    <mat-card class="w-full max-w-md p-6">
        <mat-card-header class="!mb-4">
            <mat-card-title>Sign In</mat-card-title>
        </mat-card-header>
        <mat-card-content>
            @if (errorMessage()) {
            <div class="text-red-500 mb-4 text-center">{{ errorMessage() }}</div>
            }
            <button mat-stroked-button class="w-full mb-4" (click)="signInWithGoogle()">
                <img src="/google-icon.svg" alt="Google" class="w-6 h-6 mr-2 inline" />
                Continue with Google
            </button>
            <div class="flex items-center gap-4 mb-4">
                <div class="h-px bg-gray-300 flex-1"></div>
                <span class="text-gray-500 text-sm">or</span>
                <div class="h-px bg-gray-300 flex-1"></div>
            </div>
            <form [formGroup]="signinForm" class="flex flex-col gap-4" (ngSubmit)="onSubmit()">
                <mat-form-field>
                    <mat-label>Email</mat-label>
                    <input matInput type="email" formControlName="email" required />
                    @if (signinForm.get('email')?.hasError('required') && signinForm.get('email')?.touched) {
                    <mat-error>Email is required</mat-error>
                    } @if (signinForm.get('email')?.hasError('email')) {
                    <mat-error>Please enter a valid email</mat-error>
                    }
                </mat-form-field>
                <mat-form-field>
                    <mat-label>Password</mat-label>
                    <input matInput type="password" formControlName="password" required />
                    @if (signinForm.get('password')?.hasError('required') && signinForm.get('password')?.touched) {
                    <mat-error>Password is required</mat-error>
                    } @if (signinForm.get('password')?.hasError('minlength')) {
                    <mat-error>Password must be at least 6 characters</mat-error>
                    }
                </mat-form-field>
                <button mat-raised-button color="primary" type="submit" [disabled]="signinForm.invalid || isLoading()">
                    @if (isLoading()) { Signing in... } @else { Sign In }
                </button>
            </form>
            <div class="mt-4 text-center">
                <a href="/signup" class="text-blue-600 hover:text-blue-800">Create an account</a>
            </div>
        </mat-card-content>
    </mat-card>
</div>
